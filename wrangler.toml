name = "stage"
main = "backend/src/index.ts"
compatibility_date = "2025-02-14"
compatibility_flags = ["nodejs_compat"]

# Frontend served as static assets â€” binding gives us programmatic control
[assets]
directory = "./frontend/dist"
binding = "ASSETS"
not_found_handling = "single-page-application"

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "stage_db_v2"
database_id = "1e935a1e-4a24-44f4-b83d-c70235b982d9"

# Route: serve on mikwik.se/stage/*
[[routes]]
pattern = "mikwik.se/stage/*"
zone_name = "mikwik.se"

# R2 Bucket (session 9)
[[r2_buckets]]
binding = "IMAGES"
bucket_name = "stage-images"

# Cron Triggers (session 7)
# [triggers]
# crons = ["*/5 * * * *"]
